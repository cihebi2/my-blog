---
export interface Props {
  tag: {
    tag: string;
    tagName: string;
  };
  postCount: number;
}

const { tag, postCount } = Astro.props;

// ç®€å•çš„é¢œè‰²æ•°ç»„ï¼Œé€šè¿‡å“ˆå¸Œé€‰æ‹©
const colors = [
  "bg-gradient-to-br from-blue-500 to-indigo-600",
  "bg-gradient-to-br from-green-500 to-emerald-600", 
  "bg-gradient-to-br from-purple-500 to-pink-600",
  "bg-gradient-to-br from-orange-500 to-red-600",
  "bg-gradient-to-br from-cyan-500 to-blue-600",
  "bg-gradient-to-br from-amber-500 to-yellow-600",
  "bg-gradient-to-br from-pink-500 to-rose-600",
  "bg-gradient-to-br from-indigo-500 to-purple-600"
];

// ç®€å•çš„å›¾æ ‡æ•°ç»„
const icons = ["ğŸ“š", "ğŸ¨", "âš™ï¸", "ğŸ", "ğŸ“–", "ğŸ“", "ğŸ“„", "ğŸš€"];

// æ ¹æ®æ ‡ç­¾åç”Ÿæˆä¸€ä¸ªç®€å•çš„å“ˆå¸Œå€¼
let hash = 0;
for (let i = 0; i < tag.tagName.length; i++) {
  hash = tag.tagName.charCodeAt(i) + hash;
}

const colorIndex = hash % colors.length;
const iconIndex = hash % icons.length;
const bgColor = colors[colorIndex];
const icon = icons[iconIndex];
---

<div class="group relative overflow-hidden rounded-xl shadow-lg transition-all duration-300 hover:scale-105 hover:shadow-xl">
  <a 
    href={`/tags/${tag.tag}/`}
    class={`block h-full ${bgColor} p-6 text-white transition-all duration-300 hover:shadow-2xl`}
  >
    <!-- è£…é¥°æ€§èƒŒæ™¯å…ƒç´  -->
    <div class="absolute -right-4 -top-4 h-20 w-20 rounded-full bg-white/10 transition-all duration-300 group-hover:scale-150"></div>
    <div class="absolute -bottom-2 -left-2 h-16 w-16 rounded-full bg-white/5 transition-all duration-300 group-hover:scale-125"></div>
    
    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="relative z-10">
      <!-- å›¾æ ‡å’Œæ ‡é¢˜ -->
      <div class="flex items-center justify-between mb-4">
        <div class="text-3xl">{icon}</div>
        <div class="text-right">
          <div class="text-2xl font-bold">{postCount}</div>
          <div class="text-sm opacity-90">ç¯‡æ–‡ç« </div>
        </div>
      </div>
      
      <!-- åˆ†ç±»åç§° -->
      <h3 class="text-xl font-semibold mb-2">{tag.tagName}</h3>
      
      <!-- è¿›åº¦æ¡æ•ˆæœ -->
      <div class="h-1 w-full bg-white/20 rounded-full overflow-hidden">
        <div 
          class="h-full bg-white/40 rounded-full transition-all duration-500 group-hover:w-full" 
          style={`width: ${Math.min(postCount * 10, 100)}%`}
        ></div>
      </div>
      
      <!-- æ‚¬æµ®æ—¶çš„æç¤ºæ–‡å­— -->
      <div class="mt-3 text-sm opacity-0 transition-opacity duration-300 group-hover:opacity-100">
        ç‚¹å‡»æŸ¥çœ‹æ‰€æœ‰æ–‡ç«  â†’
      </div>
    </div>
  </a>
</div> 